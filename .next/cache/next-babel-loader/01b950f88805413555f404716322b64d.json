{"ast":null,"code":"import { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\"; // import { useDispatch } from \"react-redux\";\n\nimport { BASE_URL, API_TIME_OUT } from \"../contants/constants\";\n\nfunction useTistoryLogin() {\n  const {\n    0: data,\n    1: setData\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(); //   const dispatch = useDispatch();\n\n  const absolve = () => {\n    setLoading(true);\n    const client_id = process.env.TISTORY_APP_ID;\n    const redirect_uri = process.env.TISTORY_REDIRECT_URL;\n    res.set({\n      \"access-control-allow-origin\": \"*\"\n    });\n    req.method = req.headers[\"access-control-request-method\"];\n    return axios.get(\"https://www.tistory.com/oauth/authorize\", {\n      params: {\n        client_id,\n        redirect_uri,\n        response_type: \"code\"\n      }\n    }).then(tres => {\n      res.send(tres.data);\n    }).catch(err => {\n      res.json(err);\n    });\n  };\n\n  return {\n    absolve,\n    loading,\n    error,\n    result: data\n  };\n}\n\nuseTistoryLogin.propTypes = {};\nexport default useTistoryLogin;","map":{"version":3,"sources":["/Users/daehankim/Documents/GitHub/blogshot/useActions/useTistoryLogin.js"],"names":["useState","useEffect","PropTypes","axios","BASE_URL","API_TIME_OUT","useTistoryLogin","data","setData","loading","setLoading","error","setError","absolve","client_id","process","env","TISTORY_APP_ID","redirect_uri","TISTORY_REDIRECT_URL","res","set","req","method","headers","get","params","response_type","then","tres","send","catch","err","json","result","propTypes"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;;AACA,SAASC,QAAT,EAAmBC,YAAnB,QAAuC,uBAAvC;;AAEA,SAASC,eAAT,GAA2B;AACzB,QAAM;AAAA,OAACC,IAAD;AAAA,OAAOC;AAAP,MAAkBR,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM;AAAA,OAACS,OAAD;AAAA,OAAUC;AAAV,MAAwBV,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM;AAAA,OAACW,KAAD;AAAA,OAAQC;AAAR,MAAoBZ,QAAQ,EAAlC,CAHyB,CAIzB;;AAEA,QAAMa,OAAO,GAAG,MAAM;AACpBH,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,UAAMI,SAAS,GAAGC,OAAO,CAACC,GAAR,CAAYC,cAA9B;AACA,UAAMC,YAAY,GAAGH,OAAO,CAACC,GAAR,CAAYG,oBAAjC;AACAC,IAAAA,GAAG,CAACC,GAAJ,CAAQ;AAAE,qCAA+B;AAAjC,KAAR;AACAC,IAAAA,GAAG,CAACC,MAAJ,GAAaD,GAAG,CAACE,OAAJ,CAAY,+BAAZ,CAAb;AACA,WAAOrB,KAAK,CACTsB,GADI,CACA,yCADA,EAC2C;AAC9CC,MAAAA,MAAM,EAAE;AAAEZ,QAAAA,SAAF;AAAaI,QAAAA,YAAb;AAA2BS,QAAAA,aAAa,EAAE;AAA1C;AADsC,KAD3C,EAIJC,IAJI,CAICC,IAAI,IAAI;AACZT,MAAAA,GAAG,CAACU,IAAJ,CAASD,IAAI,CAACtB,IAAd;AACD,KANI,EAOJwB,KAPI,CAOEC,GAAG,IAAI;AACZZ,MAAAA,GAAG,CAACa,IAAJ,CAASD,GAAT;AACD,KATI,CAAP;AAUD,GAhBD;;AAkBA,SAAO;AAAEnB,IAAAA,OAAF;AAAWJ,IAAAA,OAAX;AAAoBE,IAAAA,KAApB;AAA2BuB,IAAAA,MAAM,EAAE3B;AAAnC,GAAP;AACD;;AAEDD,eAAe,CAAC6B,SAAhB,GAA4B,EAA5B;AAEA,eAAe7B,eAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\n// import { useDispatch } from \"react-redux\";\nimport { BASE_URL, API_TIME_OUT } from \"../contants/constants\";\n\nfunction useTistoryLogin() {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState();\n  //   const dispatch = useDispatch();\n\n  const absolve = () => {\n    setLoading(true);\n    const client_id = process.env.TISTORY_APP_ID;\n    const redirect_uri = process.env.TISTORY_REDIRECT_URL;\n    res.set({ \"access-control-allow-origin\": \"*\" });\n    req.method = req.headers[\"access-control-request-method\"];\n    return axios\n      .get(\"https://www.tistory.com/oauth/authorize\", {\n        params: { client_id, redirect_uri, response_type: \"code\" }\n      })\n      .then(tres => {\n        res.send(tres.data);\n      })\n      .catch(err => {\n        res.json(err);\n      });\n  };\n\n  return { absolve, loading, error, result: data };\n}\n\nuseTistoryLogin.propTypes = {};\n\nexport default useTistoryLogin;\n"]},"metadata":{},"sourceType":"module"}