{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\"; // import { useDispatch } from \"react-redux\";\n\nimport { BASE_URL, API_TIME_OUT } from \"../contants/constants\";\n\nfunction usePosting() {\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(),\n      error = _useState2[0],\n      setError = _useState2[1]; //   const dispatch = useDispatch();\n\n\n  var postSave = function postSave() {\n    var code = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n      success: function success(response) {},\n      fail: function fail(error) {},\n      \"finally\": function _finally() {}\n    };\n    setLoading(true);\n    var token = localStorage.getItem(\"rjt\");\n    axios.patch(\"http://\".concat(BASE_URL, \"/posts/\").concat(code), {\n      json: _JSON$stringify(params)\n    }, {\n      timeout: API_TIME_OUT / 2,\n      // 15초 이내에 응답이 오지 않으면 에러로 간주\n      headers: {\n        \"x-api-key\": token\n      }\n    }).then(function (res) {\n      options.success && options.success(res);\n    })[\"catch\"](function (error) {\n      options.fail && options.fail(error);\n      setError(error.msg);\n    })[\"finally\"](function () {\n      options[\"finally\"] && options[\"finally\"]();\n      setLoading(false);\n    });\n  };\n\n  var posting = function posting() {\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      success: function success() {},\n      fail: function fail() {},\n      \"finally\": function _finally() {}\n    };\n    setLoading(true);\n    var token = localStorage.getItem(\"rjt\");\n    axios.post(\"http://\".concat(BASE_URL, \"/posting\"), {\n      json: _JSON$stringify(params)\n    }, {\n      timeout: API_TIME_OUT / 2,\n      // 15초 이내에 응답이 오지 않으면 에러로 간주\n      headers: {\n        \"x-api-key\": token\n      }\n    }).then(function (res) {\n      setData(res.data);\n      options.success && options.success(res); // dispatch({ type: GET_POSTS_LIST, payload: { data: res.data } });\n    })[\"catch\"](function (error) {\n      console.log(error);\n      setError(error.msg);\n      options.fail && options.fail(error);\n    })[\"finally\"](function () {\n      setLoading(false);\n      options[\"finally\"] && options[\"finally\"]();\n    });\n  };\n\n  return {\n    postSave: postSave,\n    posting: posting,\n    loading: loading,\n    error: error\n  };\n}\n\nusePosting.propTypes = {\n  tableName: PropTypes.string.isRequired,\n  id: PropTypes.any.isRequired\n};\nexport default usePosting;","map":{"version":3,"sources":["/Users/daehankim/Documents/GitHub/blogshot/useActions/usePosting.js"],"names":["useState","useEffect","PropTypes","axios","BASE_URL","API_TIME_OUT","usePosting","loading","setLoading","error","setError","postSave","code","params","options","success","response","fail","token","localStorage","getItem","patch","json","timeout","headers","then","res","msg","posting","post","setData","data","console","log","propTypes","tableName","string","isRequired","id","any"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\n// import { useDispatch } from \"react-redux\";\nimport { BASE_URL, API_TIME_OUT } from \"../contants/constants\";\n\nfunction usePosting() {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState();\n  //   const dispatch = useDispatch();\n\n  const postSave = (\n    code = \"\",\n    params = {},\n    options = { success: response => {}, fail: error => {}, finally: () => {} }\n  ) => {\n    setLoading(true);\n    const token = localStorage.getItem(\"rjt\");\n    axios\n      .patch(\n        `http://${BASE_URL}/posts/${code}`,\n        { json: JSON.stringify(params) },\n        {\n          timeout: API_TIME_OUT / 2, // 15초 이내에 응답이 오지 않으면 에러로 간주\n          headers: {\n            \"x-api-key\": token\n          }\n        }\n      )\n      .then(res => {\n        options.success && options.success(res);\n      })\n      .catch(error => {\n        options.fail && options.fail(error);\n        setError(error.msg);\n      })\n      .finally(() => {\n        options.finally && options.finally();\n        setLoading(false);\n      });\n  };\n  const posting = (\n    params = {},\n    options = { success: () => {}, fail: () => {}, finally: () => {} }\n  ) => {\n    setLoading(true);\n    const token = localStorage.getItem(\"rjt\");\n    axios\n      .post(\n        `http://${BASE_URL}/posting`,\n        { json: JSON.stringify(params) },\n        {\n          timeout: API_TIME_OUT / 2, // 15초 이내에 응답이 오지 않으면 에러로 간주\n          headers: {\n            \"x-api-key\": token\n          }\n        }\n      )\n      .then(res => {\n        setData(res.data);\n        options.success && options.success(res);\n        // dispatch({ type: GET_POSTS_LIST, payload: { data: res.data } });\n      })\n      .catch(error => {\n        console.log(error);\n        setError(error.msg);\n        options.fail && options.fail(error);\n      })\n      .finally(() => {\n        setLoading(false);\n        options.finally && options.finally();\n      });\n  };\n\n  return { postSave, posting, loading, error };\n}\n\nusePosting.propTypes = {\n  tableName: PropTypes.string.isRequired,\n  id: PropTypes.any.isRequired\n};\n\nexport default usePosting;\n"]},"metadata":{},"sourceType":"module"}